# P2P Handbook

## Status

This handbook is very much a work in progress. It's incomplete, and you should
file issues and ask questions about aspects of p2p you're interested in!

## THE HANDBOOK

This handbook is an introduction to the primitives of peer-to-peer systems for
the web, and a guide to the powerful abstractions you can build on top of those
primitives.

This handbook's goal is to prepare you to use the excellent ecosystem of p2p
modules available on npm today, and to develop your own p2p modules and
applications on top.

### introduction

what is p2p

### why you should use p2p

### why node & javascript


### what superpowers does p2p grant?

technology grants us superpowers that we would otherwise not have

- offline-first
- abstract away corporate infrastructure
- data can flow more freely

### CAP theorum

<https://en.wikipedia.org/wiki/CAP_theorem>

cheating CAP: _eventual consistency_

### p2p "layers" (roles)

identity, discovery, topology, routing, stream, protocol, data structures

### identity

- how a peer uniquely identifies itself
- optional: encrypts messages, sign messages (prove it authored/certifies content)
- generally a keypair; generally generated by each node individually (no central store dependency)
- also get a listing of means of contacting that peer

### peer discovery

given a key, find interested peers

examples
 1. bittorrent dht
 2. random walk
 3. signalhub
 4. mdns
 5. static bootstrap list
 6. dns

### peer routing

given a peer-id and peer-info, get a duplex stream

"with this piece: what if we could map a public key to a duplex stream, across the world?"

sub-topics
  - NAT hole-punching
  - relaying

### multiplexing protocols

...

### swarm / topology

- the topology of peers in the network
- <http://blog.daviddias.me/2014/12/20/webrtc-ring>

1.  structured
  - fully-connected-topology
  - kademlia
  - chord
2.  unstructured
  - signalhub
  - bittorrent swarm

### content routing

given a message, figure out which peers to route it to
^ need to get a more solid understanding on this

1.  examples
    1.  gossip
        1.  secure-gossip
        2.  hyperlog / ssb (anti-entropy)

### p2p data structures

data structures well suited to an unreliable network (or offline) with untrusted peers

1. stream
2. crdt
  - <https://en.wikipedia.org/wiki/Conflict-free_replicated_data_type>
  - <https://github.com/pfraze/crdt_notes>
3. append-only log
  1. hyperlog
  2. secure-scuttlebutt <https://scuttlebot.io/more/protocols/secure-scuttlebutt.html>
4. content addressable store
5. merkle linking (blockchain, hyperlog, ssb, etc)
  a. merkle dag (ipfs)
7. dht

#### other handy not-strictly-p2p modules

1. leveldb
2. abstract-blob-store

### protocol

what messages the peers of the network agree to exchange

1. streams: the ultimate transport-agnostic abstraction
2. multistream

### awesome p2p modules

TODO: sort these into their respective sections? or have tiny per-module bits?

- signalhub (peer discovery)
- hyperlog (identity, data structure, protocol)
- discovery-channel (peer discovery)
- discovery-swarm (peer discovery + content routing + swarm)
- bittorrent-dht (peer discovery + swarm)
- ssb-keys (identity)
- pubsub-swarm (identity, peer discovery, swarm, content routing)
- secure-gossip (content routing, protocol)

### glueing p2p modules together to make apps

1. p2p picture sharing service (walk through glueing together modules from the
   roles to do this)


## Inspiration

- <https://github.com/ipfs/specs/tree/master/libp2p>
- <https://github.com/mafintosh/p2p-workshop>
- <https://github.com/substack/stream-handbook>
- <https://ipfs.io>
- <https://github.com/dominictarr/>
- <https://github.com/diasdavid/>
- <https://github.com/mafintosh/>
- <https://github.com/jbenet/>
- <https://github.com/substack/>

